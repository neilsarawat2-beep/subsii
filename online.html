<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Subsi ki Jang - Online Modej</title>
<link rel="stylesheet" href="game-styles.css">
</head>
<body>
<div id="crt-overlay"></div>
<div id="game-window">
<button id="back-btn" onclick="goBack()">‚Üê BACK TO MENU</button>

<!-- MODE SELECTION (initial screen) -->
<div id="mode-selection" style="position:absolute; inset:0; z-index:100; background:#020202; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:20px;">
<h1 style="color:#fff; font-size:clamp(2.5rem,8vw,4rem); margin-bottom:50px; text-shadow:0 0 20px var(--cyber-blue);">ONLINE MODE</h1>
<button onclick="selectMode('1v1')" style="background:#000; color:var(--cyber-blue); border:2px solid var(--cyber-blue); padding:20px 60px; margin:15px; cursor:pointer; font-family:'Courier New'; font-weight:900; font-size:1.5rem;">1v1 MODE</button>
<button onclick="selectMode('2v2')" style="background:#000; color:var(--cyber-blue); border:2px solid var(--cyber-blue); padding:20px 60px; margin:15px; cursor:pointer; font-family:'Courier New'; font-weight:900; font-size:1.5rem;">2v2 MODE</button>
</div>

<!-- ROOM SCREEN -->
<div id="room-selection" style="position:absolute; inset:0; z-index:100; background:#020202; display:none; flex-direction:column; align-items:center; justify-content:center; padding:20px;">
<h1 id="room-title" style="color:#fff; font-size:clamp(2rem,6vw,3rem); margin-bottom:30px; text-shadow:0 0 15px var(--cyber-blue);">1V1 MODE</h1>
<button onclick="hostRoom()" style="background:#000; color:var(--cyber-blue); border:2px solid var(--cyber-blue); padding:15px 40px; margin:10px; cursor:pointer; font-family:'Courier New'; font-weight:900; font-size:1.2rem;">HOST ROOM</button>
<div id="code-display" style="color:#0f0; font-size:2rem; margin:20px; display:none;">ROOM: <span id="room-code"></span></div>
<div style="margin:20px;">
<input type="text" id="join-input" placeholder="ENTER CODE" maxlength="6" style="background:#000; color:var(--cyber-blue); border:2px solid var(--cyber-blue); padding:15px 30px; font-family:'Courier New'; font-size:1.2rem; text-align:center; text-transform:uppercase; width:300px; margin-bottom:10px;">
<button onclick="joinRoom()" style="background:#000; color:var(--cyber-blue); border:2px solid var(--cyber-blue); padding:15px 40px; margin-left:10px; cursor:pointer; font-family:'Courier New'; font-weight:900; font-size:1.1rem;">JOIN</button>
</div>
<div id="waiting" style="color:#fff; font-size:1.2rem; margin:20px; display:none;">WAITING...</div>
<button onclick="cancelRoom()" style="background:#000; color:#f00; border:2px solid #f00; padding:15px 40px; margin-top:30px; cursor:pointer; font-family:'Courier New'; font-weight:900; font-size:1.1rem;">CANCEL</button>
</div>

<!-- SELECTION SCREEN -->
<div id="selection-screen">
<h1>ONLINE BATTLE</h1>
<div id="sel-hint" style="color:#555; letter-spacing:4px; margin-bottom:10px;">[ SELECT YOUR UNIT ]</div>
<div class="grid" id="roster"></div>
</div>

<!-- BATTLE SCREEN -->
<div id="battle-screen">
<div id="ticker"></div>
<div class="hud-top" id="hud-container"></div>
<div id="arena-bg"><div id="arena-sprites" style="display:flex; justify-content:center; align-items:center; gap:20px; flex-wrap:wrap;"></div></div>
<button id="exec-trigger" onclick="handleAction()">INITIATE STRIKE</button>
<div id="control-panel">
<div id="console">
<div style="color:var(--cyber-blue); font-weight:900; border-bottom:1px solid #333; margin-bottom:10px;">>> TACTICAL READOUT</div>
<div>MODULE: <span id="c-title" class="data-val">---</span></div>
<div>ACCURACY: <span id="c-acc" class="data-val">---</span></div>
<div style="color:var(--term-red)">EST DAMAGE: <span id="c-dmg" class="data-val">---</span></div>
<div id="c-desc" style="color:#666; font-size:0.7rem; margin-top:auto;">// AWAITING MODULE...</div>
</div>
<div id="move-grid">
<button class="move-btn" id="cat-att" onclick="showSub('ATTACK')">ATTACK SET</button>
<button class="move-btn" id="cat-itm" onclick="showSub('ITEMS')">ITEM POUCH</button>
<button class="move-btn" id="b0" style="display:none;"></button>
<button class="move-btn" id="b1" style="display:none;"></button>
<button class="move-btn" id="b2" style="display:none;"></button>
<button class="move-btn" id="b3" style="display:none;"></button>
</div>
</div>
</div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
<script src="game-data.js"></script>
<script src="online-game.js"></script>
</body>
</html>
